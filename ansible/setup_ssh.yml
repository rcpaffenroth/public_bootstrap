---
- name: Bootstrap ssh keys
  # This does the setup of the user rcpaffenroth and makes sure everything
  # is current for then.  Note, this does not require root.
  hosts: localhost
  become: false
  gather_facts: false
  become: true
  become_user: rcpaffenroth
  tasks:
    - name: Get the ssh directory    
      ansible.builtin.git:
        repo: 'rcpaffenroth@moc-gateway.rcpaffenroth.org:repos/ssh'
        dest: $HOME/ssh
        update: yes
        key_file: $HOME/.ssh/id_ed25519

    - name: Copy the ssh directory
      ansible.builtin.copy:
        src: $HOME/ssh
        dest: $HOME/.ssh
        owner: rcpaffenroth
        group: rcpaffenroth
        mode: "700"
        force: yes
        